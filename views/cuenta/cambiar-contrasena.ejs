<%- include('../header'); -%>
  <%- include('../navbar'); -%>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      
      <%- include('../sidebars/index'); -%>
      <!-- partial -->
        <div class="main-panel">
            <div class="content-wrapper">
                <div class="col-12 grid-margin">
                  <form id="formulario" class="form-sample" action="/cuenta/cambiar-contrasena" method="POST">
                    <div class="card mb-5">
                      <div class="card-body">
                        <h4 class="card-title text-uppercase">Cambiar Contraseña</h4>
                        <div class="row">
                          <div class="col-sm-6">
                            <div class="form-group row">
                              <label class="col-form-label">Nueva Contraseña</label>
                              <input type="password"  id="password" name="password" class="form-control mr-sm-2" />
                            </div>
                            <div class="form-group row">
                              <label class="col-form-label">Repetir Contraseña</label>
                              <input type="password" id="repeatPass" class="form-control mr-sm-2" />
                            </div>
                          </div>
                          <div class="col-sm-6">
                            <div id='responsePass'>

                            </div>
                          </div>
                        </div>
                        
                        <div class="row justify-content-end mt-4">
                            <button type="submit" class="btn btn-primary">Guardar</button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
            </div>
            <script>
              var formulario = document.getElementById('formulario');
              var validarContrasena = function (event) {
                var password = document.getElementById('password');
                var repeatPass = document.getElementById('repeatPass');
                var regex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,16}$/;
                if(!regex.test(password.value)){
                  document.getElementById('responsePass').innerHTML = '<p>La contraseña debe tener:<br> - Entre 8 y 16 caracteres<br> - Al menos un numero<br> - Al menos una minúscula<br> - Al menos una mayúscula.</p>'
                  event.preventDefault();
                  return false;
                }else if(repeatPass.value != password.value){
                  document.getElementById('responsePass').innerHTML = '<p>Las contraseñas no coinciden</p>'
                  event.preventDefault();
                  return false;
                }else{
                  document.getElementById('responsePass').innerHTML = ''
                  return true;
                }
              };
              formulario.addEventListener('submit', validarContrasena, false);
              formulario.addEventListener('change', validarContrasena, false);
            </script>
            <footer class="footer">
                <div class="container-fluid clearfix">
                    <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">Copyright © 2018
                    <a href="https://goparty.com/" target="_blank">GoParty</a>. Todos los derechos reservados.</span>
                    <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hecho con
                    <i class="mdi mdi-heart text-danger"></i> por <a href="https://businet-web.com">Businet</a>
                    </span>
                </div>
            </footer>
         </div>
    </div>
<%- include('../footer'); -%>